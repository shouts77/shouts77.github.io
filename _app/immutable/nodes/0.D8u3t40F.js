import{d as xe,e as Ue,t as y,a as f,c as pe,b as ye}from"../chunks/G61mcw_Q.js";import"../chunks/DQfk8U_4.js";import{t as B,z as Z,A as ce,a7 as Ye,aJ as Ze,K as we,au as qe,aG as ea,aF as aa,D as ta,a2 as Q,aK as ra,u as sa,a8 as oa,p as la,W as U,c,a as na,j as x,f as r,v as Y,aL as ia,s as h,r as i,n as ca,e as oe}from"../chunks/Cn_GS6Dk.js";import{l as va,d as da,f as be,s as fa,b as ua,a as X}from"../chunks/BHnG87Pe.js";import{i as b}from"../chunks/DeP442Uo.js";import{s as le,r as ma,e as _a,a as ke,g as ha,i as ga}from"../chunks/CDgCeBFN.js";import{i as xa}from"../chunks/BoiJlNX4.js";import{p as pa}from"../chunks/DCNeKsN3.js";import{o as ya}from"../chunks/DUtka9Fd.js";function Ce(e,s,p=!1,k=!1,g=!1){var l=e,o="";B(()=>{var n=Ye;if(o===(o=s()??"")){Z&&ce();return}if(n.nodes_start!==null&&(Ze(n.nodes_start,n.nodes_end),n.nodes_start=n.nodes_end=null),o!==""){if(Z){we.data;for(var v=ce(),G=v;v!==null&&(v.nodeType!==8||v.data!=="");)G=v,v=qe(v);if(v===null)throw ea(),aa;xe(we,G),l=ta(v);return}var w=o+"";p?w=`<svg>${w}</svg>`:k&&(w=`<math>${w}</math>`);var C=Ue(w);if((p||k)&&(C=Q(C)),xe(Q(C),C.lastChild),p||k)for(;Q(C);)l.before(Q(C));else l.before(C)}})}function wa(e,s,p,k,g){var n;Z&&ce();var l=(n=s.$$slots)==null?void 0:n[p],o=!1;l===!0&&(l=s.children,o=!0),l===void 0||l(e,o?()=>k:k)}function ba(e,s,p=s){var k=ra();va(e,"input",g=>{var l=g?e.defaultValue:e.value;if(l=ne(e)?ie(l):l,p(l),k&&l!==(l=s())){var o=e.selectionStart,n=e.selectionEnd;e.value=l??"",n!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(n,e.value.length))}}),(Z&&e.defaultValue!==e.value||sa(s)==null&&e.value)&&p(ne(e)?ie(e.value):e.value),oa(()=>{var g=s();ne(e)&&g===ie(e.value)||e.type==="date"&&!g&&!e.value||g!==e.value&&(e.value=g??"")})}function ne(e){var s=e.type;return s==="number"||s==="range"}function ie(e){return e===""?null:+e}const ka=!0,Ya=Object.freeze(Object.defineProperty({__proto__:null,prerender:ka},Symbol.toStringTag,{value:"Module"}));function Ca(e,s){e.target===e.currentTarget&&s()}function Ma(e,s,p){r(s).trim()||x(p,[])}var La=y('<span class="absolute left-2 bottom-0 h-[2px] w-8 translate-x-[-1px] bg-blue-400"></span>'),Sa=y('<span class="absolute left-0.5 bottom-0 h-[2px] w-8 translate-x-[-2px] bg-blue-400"></span>'),ja=(e,s)=>{e.preventDefault(),e.stopPropagation(),s()},za=(e,s)=>e.key==="Escape"&&s(),Ra=e=>e.stopPropagation(),Ea=(e,s)=>e.key==="Escape"&&s(),Ia=y('<div class="flex justify-center items-center py-4"><div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div></div>'),Ba=y("<span> </span>"),Da=y('<p class="mt-0.5 text-xs text-gray-600 bg-yellow-50 p-1 rounded leading-snug"><!></p>'),Oa=y('<li><a class="block py-1.5 px-2 hover:bg-gray-50 transition-colors"><div class="flex items-center text-xs gap-1"><span class="text-gray-400 shrink-0 tabular-nums"> </span> <!> <h4 class="font-medium text-gray-800 truncate"><!></h4></div> <!></a></li>'),$a=y('<div class="p-1 text-center border-t border-gray-100"><a class="text-xs text-blue-600 hover:underline"> </a></div>'),Ha=y('<ul class="divide-y divide-gray-100"></ul> <!>',1),Ka=y('<div class="py-4 text-center"><p class="text-gray-500 text-sm">검색 결과가 없습니다.</p> <p class="text-xs text-gray-400 mt-1">다른 검색어로 시도해보세요.</p></div>'),Pa=y('<div class="py-4 text-center text-gray-400 text-sm"><p>검색어를 입력하세요</p></div>'),Ta=y('<div class="fixed inset-0 bg-gray-100 bg-opacity-80 z-[9999] flex items-start justify-center pt-14" role="button" tabindex="0" style="pointer-events: auto;"><div id="search-modal" class="bg-white rounded-md shadow-2xl w-[80%] max-w-sm max-h-[75vh] overflow-hidden flex flex-col font-yoo animate-fadeIn z-[10000] svelte-smrll" role="dialog" aria-modal="true" tabindex="-1" style="pointer-events: auto;"><div class="p-2 border-b border-gray-100"><div class="flex justify-between items-center mb-1.5"><h3 class="text-sm font-medium text-gray-800">검색</h3> <button class="text-gray-400 hover:text-gray-600" aria-label="닫기"><svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="relative"><input type="text" placeholder="검색어를 입력하세요" class="w-full text-xs py-1 px-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"> <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" aria-label="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <div class="overflow-y-auto flex-1"><!></div></div></div>'),Wa=y('<nav class="w-full md:w-96 px-2 pt-1"><div class="flex justify-between items-center font-yoo text-sm"><div class="flex"><a href="/">첫화면 <!></a> <a href="/blog">기록 <!></a></div> <div class="flex items-center space-x-1"><button class="px-1 py-1 text-sm hover:text-blue-600" aria-label="검색" title="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <a href="https://x.com/shouts2713531" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="X로 이동" title="X로 이동" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a> <a href="/rss.xml" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="RSS 피드 구독" title="RSS 피드 구독" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-2.5 w-2.5 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path></svg></a></div></div></nav> <!> <!>',1);function Za(e,s){la(s,!1);const[p,k]=fa(),g=()=>ua(pa,"$page",p);let l=Y(!1),o=Y(""),n=Y([]),v=Y(!1),G=[],w=[];ya(async()=>{try{const t=await fetch("/search-data.json");t.ok?(w=await t.json(),G=w.map(a=>{const{content:d,...M}=a;return M})):console.error("검색 데이터를 찾을 수 없습니다.")}catch(t){console.error("검색 데이터 로드 중 오류 발생:",t)}});function C(){const t=r(o).trim().toLowerCase();if(!t){x(n,[]);return}x(v,!0);try{if(!w||w.length===0){x(n,[]),x(v,!1);return}Me(t)}catch(a){console.error("검색 중 오류 발생:",a),x(n,[]),x(v,!1)}}function Me(t){x(n,w.filter(a=>{const d=a.title&&a.title.toLowerCase().includes(t),M=a.content&&a.content.toLowerCase().includes(t),D=a.summary&&a.summary.toLowerCase().includes(t),O=a.category&&a.category.toLowerCase().includes(t);return d||M||D||O}).map(a=>{let d="";return a.content&&a.content.toLowerCase().includes(t)?d=ve(a.content,t,60):a.summary&&a.summary.toLowerCase().includes(t)&&(d=ve(a.summary,t,60)),{slug:a.slug,title:a.title,date:a.date,category:a.category||"미분류",summary:a.summary||"",matchContext:d}}).sort((a,d)=>new Date(d.date)-new Date(a.date))),x(v,!1)}function ve(t,a,d=40){if(!t||!a||typeof t!="string")return"";const M=t.toLowerCase(),D=a.toLowerCase(),O=M.indexOf(D);if(O===-1)return"";const P=Math.max(0,O-d),j=Math.min(t.length,O+a.length+d);let z=t.substring(P,j);return P>0&&(z="..."+z),j<t.length&&(z=z+"..."),z}function S(){x(l,!r(l)),r(l)||(x(o,""),x(n,[]))}function Le(t){t.key==="Enter"&&C()}function Se(t){const a=document.getElementById("search-modal");a&&!a.contains(t.target)&&r(l)&&S()}xa();var de=Wa();be("click",ia,Se);var q=U(de),fe=c(q),ee=c(fe),J=c(ee),je=h(c(J));{var ze=t=>{var a=La();f(t,a)};b(je,t=>{g().url.pathname==="/"&&t(ze)})}i(J);var ae=h(J,2),Re=h(c(ae));{var Ee=t=>{var a=Sa();f(t,a)};b(Re,t=>{g().url.pathname.startsWith("/blog")&&t(Ee)})}i(ae),i(ee);var ue=h(ee,2),Ie=c(ue);Ie.__click=[ja,S],ca(4),i(ue),i(fe),i(q);var me=h(q,2);{var Be=t=>{var a=Ta();a.__click=[Ca,S],a.__keydown=[za,S];var d=c(a);d.__click=[Ra],d.__keydown=[Ea,S];var M=c(d),D=c(M),O=h(c(D),2);O.__click=S,i(D);var P=h(D,2),j=c(P);ma(j),j.__input=[Ma,o,n];var z=h(j,2);z.__click=C,i(P),i(M);var _e=h(M,2),Oe=c(_e);{var $e=R=>{var te=Ia();f(R,te)},He=(R,te)=>{{var Ke=$=>{var N=Ha(),T=U(N);_a(T,5,()=>r(n),ga,(L,u)=>{var I=Oa(),H=c(I);H.__click=S;var W=c(H),se=c(W),Te=c(se,!0);i(se);var he=h(se,2);{var We=m=>{var _=Ba(),A=c(_,!0);i(_),B(F=>{le(_,1,`px-1 py-0 rounded shrink-0 text-xs ${F??""}`,"svelte-smrll"),X(A,r(u).category)},[()=>ha(r(u).category)],oe),f(m,_)};b(he,m=>{r(u).category&&m(We)})}var ge=h(he,2),Ae=c(ge);{var Fe=m=>{var _=pe(),A=U(_);Ce(A,()=>r(u).title.replace(new RegExp(r(o),"gi"),F=>`<mark class="bg-yellow-200 px-0.5 rounded">${F}</mark>`)),f(m,_)},Ve=m=>{var _=ye();B(()=>X(_,r(u).title)),f(m,_)};b(Ae,m=>{r(o)&&r(o).trim()?m(Fe):m(Ve,!1)})}i(ge),i(W);var Xe=h(W,2);{var Ge=m=>{var _=Da(),A=c(_);{var F=K=>{var V=pe(),Ne=U(V);Ce(Ne,()=>r(u).matchContext.replace(new RegExp(r(o),"gi"),Qe=>`<mark class="bg-yellow-200 px-0.5 rounded">${Qe}</mark>`)),f(K,V)},Je=K=>{var V=ye();B(()=>X(V,r(u).matchContext)),f(K,V)};b(A,K=>{r(o)&&r(o).trim()?K(F):K(Je,!1)})}i(_),f(m,_)};b(Xe,m=>{r(u).matchContext&&m(Ge)})}i(H),i(I),B(()=>{ke(H,"href",`/blog/${r(u).slug??""}`),X(Te,r(u).date)}),f(L,I)}),i(T);var re=h(T,2);{var E=L=>{var u=$a(),I=c(u);I.__click=S;var H=c(I);i(I),i(u),B(W=>{ke(I,"href",`/search?q=${W??""}`),X(H,`모든 결과 보기 (${r(n).length??""}건)`)},[()=>encodeURIComponent(r(o))],oe),f(L,u)};b(re,L=>{r(n).length>15&&L(E)})}f($,N)},Pe=($,N)=>{{var T=E=>{var L=Ka();f(E,L)},re=E=>{var L=Pa();f(E,L)};b($,E=>{r(o)?E(T):E(re,!1)},N)}};b(R,$=>{r(n).length>0?$(Ke):$(Pe,!1)},te)}};b(Oe,R=>{r(v)?R($e):R(He,!1)})}i(_e),i(d),i(a),B(()=>z.disabled=r(v)),be("keypress",j,Le),ba(j,()=>r(o),R=>x(o,R)),f(t,a)};b(me,t=>{r(l)&&t(Be)})}var De=h(me,2);wa(De,s,"default",{}),B(t=>{le(J,1,`md px-2 py-1 text-sm hover:text-red-800 relative ${g().url.pathname==="/"?"active":""}`,"svelte-smrll"),le(ae,1,t,"svelte-smrll")},[()=>`md px-2 py-1 text-sm hover:text-red-800 relative ${g().url.pathname.startsWith("/blog")?"active":""}`],oe),f(e,de),na(),k()}da(["click","keydown","input"]);export{Za as component,Ya as universal};
