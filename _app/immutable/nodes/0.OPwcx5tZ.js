import{b as xe,e as Ze,t as b,a as u,c as be,d as we}from"../chunks/BweKeVM-.js";import{t as D,h as ce,i as ye,aa as qe,aJ as ea,g as ke,aj as aa,am as ta,ak as ra,m as sa,a5 as G,aK as oa,y as la,ar as na,ah as ia,p as ca,ab as N,K as Z,D as q,a as va,M as h,A as r,aL as da,c as l,s as x,r as o,n as fa}from"../chunks/BS0kdNSd.js";import{l as ua,e as M,b as ha,s as Q}from"../chunks/CQI4YuXN.js";import{i as w}from"../chunks/NpJENNZr.js";import{s as le,r as ma,e as ga,a as Ce,g as _a,i as pa}from"../chunks/BVq941A0.js";import{s as xa}from"../chunks/BCbqkWJk.js";import{s as ba,a as wa}from"../chunks/Cs_oWva2.js";import{p as ya}from"../chunks/r-0ST_n3.js";import{o as ka}from"../chunks/hr14awuk.js";function Me(t,s,v=!1,j=!1,m=!1){var n=t,i="";D(()=>{var c=qe;if(i===(i=s()??"")){ce&&ye();return}if(c.nodes_start!==null&&(ea(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),i!==""){if(ce){ke.data;for(var f=ye(),O=f;f!==null&&(f.nodeType!==8||f.data!=="");)O=f,f=aa(f);if(f===null)throw ta(),ra;xe(ke,O),n=sa(f);return}var y=i+"";v?y=`<svg>${y}</svg>`:j&&(y=`<math>${y}</math>`);var k=Ze(y);if((v||j)&&(k=G(k)),xe(G(k),k.lastChild),v||j)for(;G(k);)n.before(G(k));else n.before(k)}})}function Ca(t,s,v=s){var j=oa();ua(t,"input",m=>{var n=m?t.defaultValue:t.value;if(n=ne(t)?ie(n):n,v(n),j&&n!==(n=s())){var i=t.selectionStart,c=t.selectionEnd;t.value=n??"",c!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(c,t.value.length))}}),(ce&&t.defaultValue!==t.value||la(s)==null&&t.value)&&v(ne(t)?ie(t.value):t.value),na(()=>{var m=s();ne(t)&&m===ie(t.value)||t.type==="date"&&!m&&!t.value||m!==t.value&&(t.value=m??"")})}function ne(t){var s=t.type;return s==="number"||s==="range"}function ie(t){return t===""?null:+t}function Ma(t){return function(...s){var v=s[0];v.target===this&&(t==null||t.apply(this,s))}}function je(t){return function(...s){var v=s[0];return v.stopPropagation(),t==null?void 0:t.apply(this,s)}}function ja(t,s){var n;var v=(n=t.$$events)==null?void 0:n[s.type],j=ia(v)?v.slice():v==null?[]:[v];for(var m of j)m.call(this,s)}const La=!0,Ua=Object.freeze(Object.defineProperty({__proto__:null,prerender:La},Symbol.toStringTag,{value:"Module"}));var Sa=b('<span class="absolute left-2 bottom-0 h-[2px] w-8 translate-x-[-1px] bg-blue-400"></span>'),$a=b('<span class="absolute left-0.5 bottom-0 h-[2px] w-8 translate-x-[-2px] bg-blue-400"></span>'),Ra=b('<div class="flex justify-center items-center py-4"><div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div></div>'),za=b("<span> </span>"),Ia=b('<p class="mt-0.5 text-xs text-gray-600 bg-yellow-50 p-1 rounded leading-snug"><!></p>'),Ea=b('<li><a class="block py-1.5 px-2 hover:bg-gray-50 transition-colors"><div class="flex items-center text-xs gap-1"><span class="text-gray-400 shrink-0 tabular-nums"> </span> <!> <h4 class="font-medium text-gray-800 truncate"><!></h4></div> <!></a></li>'),Ba=b('<div class="p-1 text-center border-t border-gray-100"><a class="text-xs text-blue-600 hover:underline"> </a></div>'),Da=b('<ul class="divide-y divide-gray-100"></ul> <!>',1),Oa=b('<div class="py-4 text-center"><p class="text-gray-500 text-sm">검색 결과가 없습니다.</p> <p class="text-xs text-gray-400 mt-1">다른 검색어로 시도해보세요.</p></div>'),Ha=b('<div class="py-4 text-center text-gray-400 text-sm"><p>검색어를 입력하세요</p></div>'),Ka=b('<div class="fixed inset-0 bg-black bg-opacity-30 z-40 flex items-start justify-center pt-14"><div id="search-modal" class="bg-white rounded-md shadow-lg w-[80%] max-w-sm max-h-[75vh] overflow-hidden flex flex-col font-yoo animate-fadeIn svelte-smrll"><div class="p-2 border-b border-gray-100"><div class="flex justify-between items-center mb-1.5"><h3 class="text-sm font-medium text-gray-800">검색</h3> <button class="text-gray-400 hover:text-gray-600" aria-label="닫기"><svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="relative"><input type="text" placeholder="검색어를 입력하세요" class="w-full text-xs py-1 px-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"> <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" aria-label="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <div class="overflow-y-auto flex-1"><!></div></div></div>'),Pa=b('<nav class="w-full md:w-96 px-2 pt-1"><div class="flex justify-between items-center font-yoo text-sm"><div class="flex"><a href="/">첫화면 <!></a> <a href="/blog">기록 <!></a></div> <div class="flex items-center space-x-1"><button class="px-1 py-1 text-sm hover:text-blue-600" aria-label="검색" title="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <a href="https://x.com/shouts2713531" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="X로 이동" title="X로 이동" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a> <a href="/rss.xml" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="RSS 피드 구독" title="RSS 피드 구독" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-2.5 w-2.5 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path></svg></a></div></div></nav> <!> <!>',1);function Ya(t,s){ca(s,!0);const[v,j]=ba(),m=()=>wa(ya,"$page",v);let n=N(!1),i=N(""),c=N(Z([])),f=N(!1),O=N(Z([]));Z({}),Z({});let y=[];ka(async()=>{try{console.log("검색 색인 데이터 로드 시도...");const a=await fetch("/search-data/index.json");if(a.ok)h(O,await a.json(),!0),console.log(`검색 색인 로드 완료: ${r(O).length}개 포스트 메타데이터`);else{console.log("색인 파일을 찾을 수 없어 전체 검색 데이터를 로드합니다.");const e=await fetch("/search-data.json");if(e.ok){const d=await e.json();h(O,d.map(L=>{const{content:z,...S}=L;return S}),!0),console.log(`전체 데이터에서 ${r(O).length}개 메타데이터 추출`)}}}catch(a){console.error("검색 데이터 로드 중 오류 발생:",a)}});function k(){const a=r(i).trim().toLowerCase();if(!a){h(c,[],!0);return}h(f,!0);try{!y||y.length===0?fetch("/search-data.json").then(e=>e.json()).then(e=>{y=e,ve(a)}).catch(e=>{console.error("검색 데이터 로드 실패:",e),h(c,[],!0),h(f,!1)}):ve(a)}catch(e){console.error("검색 중 오류 발생:",e),h(c,[],!0),h(f,!1)}}function ve(a){console.log(`검색어: "${a}"`),h(c,y.filter(e=>{const d=e.title&&e.title.toLowerCase().includes(a),L=e.content&&e.content.toLowerCase().includes(a),z=e.summary&&e.summary.toLowerCase().includes(a),S=e.category&&e.category.toLowerCase().includes(a);return e.content&&e.content.toLowerCase().includes(a)&&console.log(`포스트 '${e.title}'에서 '${a}' 키워드 발견`),d||L||z||S}).map(e=>{let d="";return e.content&&e.content.toLowerCase().includes(a)?(d=de(e.content,a,60),console.log(`컨텍스트 추출: "${d}"`)):e.summary&&e.summary.toLowerCase().includes(a)&&(d=de(e.summary,a,60)),{slug:e.slug,title:e.title,date:e.date,category:e.category||"미분류",summary:e.summary||"",matchContext:d}}).sort((e,d)=>new Date(d.date)-new Date(e.date)),!0),console.log(`검색 결과: ${r(c).length}개 포스트 찾음`),h(f,!1)}function de(a,e,d=40){if(!a||!e||typeof a!="string")return"";const L=a.toLowerCase(),z=e.toLowerCase(),S=L.indexOf(z);if(S===-1)return"";const A=Math.max(0,S-d),$=Math.min(a.length,S+e.length+d);let I=a.substring(A,$);return A>0&&(I="..."+I),$<a.length&&(I=I+"..."),I}function H(){h(n,!r(n)),r(n)||(h(i,""),h(c,[],!0))}function Le(){r(i).trim()||h(c,[],!0)}function Se(a){a.key==="Enter"&&k()}function $e(a){const e=document.getElementById("search-modal");e&&!e.contains(a.target)&&r(n)&&H()}var fe=Pa();M("click",da,$e);var ee=q(fe),ue=l(ee),ae=l(ue),U=l(ae),Re=x(l(U));{var ze=a=>{var e=Sa();u(a,e)};w(Re,a=>{m().url.pathname==="/"&&a(ze)})}o(U);var te=x(U,2),Ie=x(l(te));{var Ee=a=>{var e=$a();u(a,e)};w(Ie,a=>{m().url.pathname.startsWith("/blog")&&a(Ee)})}o(te),o(ae);var he=x(ae,2),Be=l(he);fa(4),o(he),o(ue),o(ee);var me=x(ee,2);{var De=a=>{var e=Ka(),d=l(e),L=l(d),z=l(L),S=x(l(z),2);o(z);var A=x(z,2),$=l(A);ma($),ha($);var I=x($,2);o(A),o(L);var ge=x(L,2),He=l(ge);{var Ke=C=>{var re=Ra();u(C,re)},Pe=(C,re)=>{{var Te=K=>{var Y=Da(),V=q(Y);ga(V,21,()=>r(c),pa,(R,g)=>{var B=Ea(),P=l(B),W=l(P),oe=l(W),Ve=l(oe,!0);o(oe);var _e=x(oe,2);{var We=_=>{var p=za(),X=l(p,!0);o(p),D(F=>{le(p,1,`px-1 py-0 rounded shrink-0 text-xs ${F??""}`,"svelte-smrll"),Q(X,r(g).category)},[()=>_a(r(g).category)]),u(_,p)};w(_e,_=>{r(g).category&&_(We)})}var pe=x(_e,2),Xe=l(pe);{var Fe=_=>{var p=be(),X=q(p);Me(X,()=>r(g).title.replace(new RegExp(r(i),"gi"),F=>`<mark class="bg-yellow-200 px-0.5 rounded">${F}</mark>`)),u(_,p)},Je=_=>{var p=we();D(()=>Q(p,r(g).title)),u(_,p)};w(Xe,_=>{r(i)&&r(i).trim()?_(Fe):_(Je,!1)})}o(pe),o(W);var Ne=x(W,2);{var Qe=_=>{var p=Ia(),X=l(p);{var F=T=>{var J=be(),Ye=q(J);Me(Ye,()=>r(g).matchContext.replace(new RegExp(r(i),"gi"),Ge=>`<mark class="bg-yellow-200 px-0.5 rounded">${Ge}</mark>`)),u(T,J)},Ue=T=>{var J=we();D(()=>Q(J,r(g).matchContext)),u(T,J)};w(X,T=>{r(i)&&r(i).trim()?T(F):T(Ue,!1)})}o(p),u(_,p)};w(Ne,_=>{r(g).matchContext&&_(Qe)})}o(P),o(B),D(()=>{Ce(P,"href",`/blog/${r(g).slug??""}`),Q(Ve,r(g).date)}),M("click",P,H),u(R,B)}),o(V);var se=x(V,2);{var E=R=>{var g=Ba(),B=l(g),P=l(B);o(B),o(g),D(W=>{Ce(B,"href",`/search?q=${W??""}`),Q(P,`모든 결과 보기 (${r(c).length??""}건)`)},[()=>encodeURIComponent(r(i))]),M("click",B,H),u(R,g)};w(se,R=>{r(c).length>15&&R(E)})}u(K,Y)},Ae=(K,Y)=>{{var V=E=>{var R=Oa();u(E,R)},se=E=>{var R=Ha();u(E,R)};w(K,E=>{r(i)?E(V):E(se,!1)},Y)}};w(C,K=>{r(c).length>0?K(Te):K(Ae,!1)},re)}};w(He,C=>{r(f)?C(Ke):C(Pe,!1)})}o(ge),o(d),o(e),D(()=>I.disabled=r(f)),M("click",S,H),Ca($,()=>r(i),C=>h(i,C)),M("keypress",$,Se),M("input",$,Le),M("click",I,k),M("click",d,je(function(C){ja.call(this,s,C)})),M("click",e,Ma(H)),u(a,e)};w(me,a=>{r(n)&&a(De)})}var Oe=x(me,2);xa(Oe,()=>s.children),D(a=>{le(U,1,`md px-2 py-1 text-sm hover:text-red-800 relative ${m().url.pathname==="/"?"active":""}`,"svelte-smrll"),le(te,1,a,"svelte-smrll")},[()=>`md px-2 py-1 text-sm hover:text-red-800 relative ${m().url.pathname.startsWith("/blog")?"active":""}`]),M("click",Be,je(H)),u(t,fe),va(),j()}export{Ya as component,Ua as universal};
