import{b as ue,e as Ae,t as x,a as c,c as he,d as pe}from"../chunks/Ps3vwJn3.js";import{Y as z,h as re,f as me,aa as Fe,aJ as Ge,c as _e,as as Je,aD as Ne,aC as Qe,s as Ze,a5 as T,aK as ea,o as aa,aG as ta,am as ra,X as sa,ab as U,D as la,y as V,Z as oa,aL as na,_ as l,x as h,$ as r,e as ia,t as a,F as w}from"../chunks/s7BoBSYB.js";import{l as va,e as k,b as ca,s as X}from"../chunks/CgT0RaFa.js";import{i as g}from"../chunks/BEP2bvq9.js";import{s as xe,r as da,e as fa,a as ge,i as ua}from"../chunks/DVrtI2Mj.js";import{s as ha}from"../chunks/vE_0L8Bp.js";import{s as pa,a as ma}from"../chunks/Cbf4BlAg.js";import{p as _a}from"../chunks/C8jEogMW.js";function be(e,t,v=!1,C=!1,d=!1){var o=e,s="";z(()=>{var i=Fe;if(s===(s=t()??"")){re&&me();return}if(i.nodes_start!==null&&(Ge(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),s!==""){if(re){_e.data;for(var f=me(),R=f;f!==null&&(f.nodeType!==8||f.data!=="");)R=f,f=Je(f);if(f===null)throw Ne(),Qe;ue(_e,R),o=Ze(f);return}var E=s+"";v?E=`<svg>${E}</svg>`:C&&(E=`<math>${E}</math>`);var b=Ae(E);if((v||C)&&(b=T(b)),ue(T(b),b.lastChild),v||C)for(;T(b);)o.before(T(b));else o.before(b)}})}function xa(e,t,v=t){var C=ea();va(e,"input",d=>{var o=d?e.defaultValue:e.value;if(o=ae(e)?te(o):o,v(o),C&&o!==(o=t())){var s=e.selectionStart,i=e.selectionEnd;e.value=o??"",i!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(i,e.value.length))}}),(re&&e.defaultValue!==e.value||aa(t)==null&&e.value)&&v(ae(e)?te(e.value):e.value),ta(()=>{var d=t();ae(e)&&d===te(e.value)||e.type==="date"&&!d&&!e.value||d!==e.value&&(e.value=d??"")})}function ae(e){var t=e.type;return t==="number"||t==="range"}function te(e){return e===""?null:+e}function ga(e){return function(...t){var v=t[0];v.target===this&&(e==null||e.apply(this,t))}}function ye(e){return function(...t){var v=t[0];return v.stopPropagation(),e==null?void 0:e.apply(this,t)}}function ba(e,t){var o;var v=(o=e.$$events)==null?void 0:o[t.type],C=ra(v)?v.slice():v==null?[]:[v];for(var d of C)d.call(this,t)}var ya=x('<span class="absolute left-2 bottom-0 h-[2px] w-8 translate-x-[-1px] bg-blue-400"></span>'),wa=x('<span class="absolute left-0.5 bottom-0 h-[2px] w-8 translate-x-[-2px] bg-blue-400"></span>'),ka=x('<div class="flex justify-center items-center py-4"><div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div></div>'),Ca=x('<span class="px-1 py-0.5 rounded-full bg-gray-100 text-gray-700 shrink-0 text-xs"> </span>'),Ra=x('<p class="mt-0.5 text-xs text-gray-600 bg-yellow-50 p-1 rounded leading-snug"><!></p>'),Sa=x('<li><a class="block py-1.5 px-2 hover:bg-gray-50 transition-colors"><div class="flex items-center text-xs gap-1"><span class="text-gray-400 shrink-0 tabular-nums"> </span> <!> <h4 class="font-medium text-gray-800 truncate"><!></h4></div> <!></a></li>'),Ma=x('<div class="p-1 text-center border-t border-gray-100"><a class="text-xs text-blue-600 hover:underline"> </a></div>'),ja=x('<ul class="divide-y divide-gray-100"></ul> <!>',1),za=x('<div class="py-4 text-center"><p class="text-gray-500 text-sm">검색 결과가 없습니다.</p> <p class="text-xs text-gray-400 mt-1">다른 검색어로 시도해보세요.</p></div>'),Ea=x('<div class="py-4 text-center text-gray-400 text-sm"><p>검색어를 입력하세요</p></div>'),$a=x('<div class="fixed inset-0 bg-black bg-opacity-30 z-40 flex items-start justify-center pt-14"><div id="search-modal" class="bg-white rounded-md shadow-lg w-[80%] max-w-sm max-h-[75vh] overflow-hidden flex flex-col font-yoo animate-fadeIn svelte-smrll"><div class="p-2 border-b border-gray-100"><div class="flex justify-between items-center mb-1.5"><h3 class="text-sm font-medium text-gray-800">검색</h3> <button class="text-gray-400 hover:text-gray-600" aria-label="닫기"><svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="relative"><input type="text" placeholder="검색어를 입력하세요" class="w-full text-xs py-1 px-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"> <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" aria-label="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <div class="overflow-y-auto flex-1"><!></div></div></div>'),Ba=x('<nav class="w-full md:w-96 px-2 pt-1"><div class="flex justify-between items-center font-yoo text-sm"><div class="flex"><a href="/">첫화면 <!></a> <a href="/blog">기록 <!></a></div> <div class="flex items-center space-x-1"><button class="px-1 py-1 text-sm hover:text-blue-600" aria-label="검색" title="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <a href="https://x.com/shouts2713531" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="X로 이동" title="X로 이동" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a> <a href="/rss.xml" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="RSS 피드 구독" title="RSS 피드 구독" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-2.5 w-2.5 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path></svg></a></div></div></nav> <!> <!>',1);function Ka(e,t){sa(t,!0);const[v,C]=pa(),d=()=>ma(_a,"$page",v);let o=U(!1),s=U(""),i=U(la([])),f=U(!1);function R(){w(o,!a(o)),a(o)||(w(s,""),w(i,[],!0))}function E(){a(s).trim()||w(i,[...a(i)],!0)}async function b(){if(!a(s).trim()){w(i,[],!0);return}w(f,!0);try{const p=await(await fetch(`/api/search?q=${encodeURIComponent(a(s).trim())}`)).json();w(i,p.results,!0)}catch(n){console.error("검색 중 오류 발생:",n),w(i,[],!0)}finally{w(f,!1)}}function we(n){n.key==="Enter"&&b()}function ke(n){const p=document.getElementById("search-modal");p&&!p.contains(n.target)&&a(o)&&R()}var se=Ba();k("click",na,ke);var W=V(se),le=l(W),Y=l(le),q=l(Y),Ce=h(l(q));{var Re=n=>{var p=ya();c(n,p)};g(Ce,n=>{d().url.pathname==="/"&&n(Re)})}r(q);var A=h(q,2),Se=h(l(A));{var Me=n=>{var p=wa();c(n,p)};g(Se,n=>{d().url.pathname.startsWith("/blog")&&n(Me)})}r(A),r(Y);var oe=h(Y,2),je=l(oe);ia(4),r(oe),r(le),r(W);var ne=h(W,2);{var ze=n=>{var p=$a(),F=l(p),G=l(F),J=l(G),$e=h(l(J),2);r(J);var ie=h(J,2),$=l(ie);da($),ca($);var ve=h($,2);r(ie),r(G);var ce=h(G,2),Be=l(ce);{var Ie=y=>{var N=ka();c(y,N)},He=(y,N)=>{{var Le=B=>{var K=ja(),L=V(K);fa(L,21,()=>a(i),ua,(S,m)=>{var j=Sa(),I=l(j),D=l(I),Z=l(D),Oe=l(Z,!0);r(Z);var de=h(Z,2);{var Pe=u=>{var _=Ca(),O=l(_,!0);r(_),z(()=>X(O,a(m).category)),c(u,_)};g(de,u=>{a(m).category&&u(Pe)})}var fe=h(de,2),Xe=l(fe);{var qe=u=>{var _=he(),O=V(_);be(O,()=>a(m).title.replace(new RegExp(a(s),"gi"),ee=>`<mark class="bg-yellow-200 px-0.5 rounded">${ee}</mark>`)),c(u,_)},Ke=u=>{var _=pe();z(()=>X(_,a(m).title)),c(u,_)};g(Xe,u=>{a(s)&&a(s).trim()?u(qe):u(Ke,!1)})}r(fe),r(D);var Te=h(D,2);{var Ue=u=>{var _=Ra(),O=l(_);{var ee=H=>{var P=he(),We=V(P);be(We,()=>a(m).matchContext.replace(new RegExp(a(s),"gi"),Ye=>`<mark class="bg-yellow-200 px-0.5 rounded">${Ye}</mark>`)),c(H,P)},Ve=H=>{var P=pe();z(()=>X(P,a(m).matchContext)),c(H,P)};g(O,H=>{a(s)&&a(s).trim()?H(ee):H(Ve,!1)})}r(_),c(u,_)};g(Te,u=>{a(m).matchContext&&u(Ue)})}r(I),r(j),z(()=>{ge(I,"href",`/blog/${a(m).slug??""}`),X(Oe,a(m).date)}),k("click",I,R),c(S,j)}),r(L);var Q=h(L,2);{var M=S=>{var m=Ma(),j=l(m),I=l(j);r(j),r(m),z(D=>{ge(j,"href",`/search?q=${D??""}`),X(I,`모든 결과 보기 (${a(i).length??""}건)`)},[()=>encodeURIComponent(a(s))]),k("click",j,R),c(S,m)};g(Q,S=>{a(i).length>15&&S(M)})}c(B,K)},De=(B,K)=>{{var L=M=>{var S=za();c(M,S)},Q=M=>{var S=Ea();c(M,S)};g(B,M=>{a(s)?M(L):M(Q,!1)},K)}};g(y,B=>{a(i).length>0?B(Le):B(De,!1)},N)}};g(Be,y=>{a(f)?y(Ie):y(He,!1)})}r(ce),r(F),r(p),z(()=>ve.disabled=a(f)),k("click",$e,R),xa($,()=>a(s),y=>w(s,y)),k("keypress",$,we),k("input",$,E),k("click",ve,b),k("click",F,ye(function(y){ba.call(this,t,y)})),k("click",p,ga(R)),c(n,p)};g(ne,n=>{a(o)&&n(ze)})}var Ee=h(ne,2);ha(Ee,()=>t.children),z(n=>{xe(q,1,`md px-2 py-1 text-sm hover:text-red-800 relative ${d().url.pathname==="/"?"active":""}`,"svelte-smrll"),xe(A,1,n,"svelte-smrll")},[()=>`md px-2 py-1 text-sm hover:text-red-800 relative ${d().url.pathname.startsWith("/blog")?"active":""}`]),k("click",je,ye(R)),c(e,se),oa(),C()}export{Ka as component};
