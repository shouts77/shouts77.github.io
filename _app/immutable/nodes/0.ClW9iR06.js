import{b as pe,e as Ze,t as b,a as u,c as xe,d as be}from"../chunks/Bf8EIeX-.js";import{t as B,h as ie,i as we,aa as qe,aJ as ea,g as ye,as as aa,aD as ta,aC as ra,m as sa,a5 as U,aK as oa,y as la,aG as na,am as ia,p as ca,ab as G,K as Y,D as Z,a as va,M as h,A as r,aL as da,c as l,s as _,r as o,n as fa}from"../chunks/C3k3xJba.js";import{l as ua,e as M,b as ha,s as J}from"../chunks/DY9SC2Sg.js";import{i as w}from"../chunks/eFEshVwY.js";import{s as ke,r as ma,e as ga,a as Ce,i as _a}from"../chunks/DvhvKenV.js";import{s as pa}from"../chunks/CKCmK1Zd.js";import{s as xa,a as ba}from"../chunks/CFXVYhEx.js";import{p as wa}from"../chunks/SMYOBx4n.js";import{o as ya}from"../chunks/CwPrTOBV.js";function Me(t,s,v=!1,j=!1,m=!1){var n=t,i="";B(()=>{var c=qe;if(i===(i=s()??"")){ie&&we();return}if(c.nodes_start!==null&&(ea(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),i!==""){if(ie){ye.data;for(var f=we(),O=f;f!==null&&(f.nodeType!==8||f.data!=="");)O=f,f=aa(f);if(f===null)throw ta(),ra;pe(ye,O),n=sa(f);return}var y=i+"";v?y=`<svg>${y}</svg>`:j&&(y=`<math>${y}</math>`);var k=Ze(y);if((v||j)&&(k=U(k)),pe(U(k),k.lastChild),v||j)for(;U(k);)n.before(U(k));else n.before(k)}})}function ka(t,s,v=s){var j=oa();ua(t,"input",m=>{var n=m?t.defaultValue:t.value;if(n=le(t)?ne(n):n,v(n),j&&n!==(n=s())){var i=t.selectionStart,c=t.selectionEnd;t.value=n??"",c!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(c,t.value.length))}}),(ie&&t.defaultValue!==t.value||la(s)==null&&t.value)&&v(le(t)?ne(t.value):t.value),na(()=>{var m=s();le(t)&&m===ne(t.value)||t.type==="date"&&!m&&!t.value||m!==t.value&&(t.value=m??"")})}function le(t){var s=t.type;return s==="number"||s==="range"}function ne(t){return t===""?null:+t}function Ca(t){return function(...s){var v=s[0];v.target===this&&(t==null||t.apply(this,s))}}function je(t){return function(...s){var v=s[0];return v.stopPropagation(),t==null?void 0:t.apply(this,s)}}function Ma(t,s){var n;var v=(n=t.$$events)==null?void 0:n[s.type],j=ia(v)?v.slice():v==null?[]:[v];for(var m of j)m.call(this,s)}const ja=!0,Na=Object.freeze(Object.defineProperty({__proto__:null,prerender:ja},Symbol.toStringTag,{value:"Module"}));var La=b('<span class="absolute left-2 bottom-0 h-[2px] w-8 translate-x-[-1px] bg-blue-400"></span>'),Sa=b('<span class="absolute left-0.5 bottom-0 h-[2px] w-8 translate-x-[-2px] bg-blue-400"></span>'),$a=b('<div class="flex justify-center items-center py-4"><div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div></div>'),Ra=b('<span class="px-1 py-0.5 rounded-full bg-gray-100 text-gray-700 shrink-0 text-xs"> </span>'),za=b('<p class="mt-0.5 text-xs text-gray-600 bg-yellow-50 p-1 rounded leading-snug"><!></p>'),Ia=b('<li><a class="block py-1.5 px-2 hover:bg-gray-50 transition-colors"><div class="flex items-center text-xs gap-1"><span class="text-gray-400 shrink-0 tabular-nums"> </span> <!> <h4 class="font-medium text-gray-800 truncate"><!></h4></div> <!></a></li>'),Da=b('<div class="p-1 text-center border-t border-gray-100"><a class="text-xs text-blue-600 hover:underline"> </a></div>'),Ea=b('<ul class="divide-y divide-gray-100"></ul> <!>',1),Ba=b('<div class="py-4 text-center"><p class="text-gray-500 text-sm">검색 결과가 없습니다.</p> <p class="text-xs text-gray-400 mt-1">다른 검색어로 시도해보세요.</p></div>'),Oa=b('<div class="py-4 text-center text-gray-400 text-sm"><p>검색어를 입력하세요</p></div>'),Ha=b('<div class="fixed inset-0 bg-black bg-opacity-30 z-40 flex items-start justify-center pt-14"><div id="search-modal" class="bg-white rounded-md shadow-lg w-[80%] max-w-sm max-h-[75vh] overflow-hidden flex flex-col font-yoo animate-fadeIn svelte-smrll"><div class="p-2 border-b border-gray-100"><div class="flex justify-between items-center mb-1.5"><h3 class="text-sm font-medium text-gray-800">검색</h3> <button class="text-gray-400 hover:text-gray-600" aria-label="닫기"><svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="relative"><input type="text" placeholder="검색어를 입력하세요" class="w-full text-xs py-1 px-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"> <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" aria-label="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <div class="overflow-y-auto flex-1"><!></div></div></div>'),Ka=b('<nav class="w-full md:w-96 px-2 pt-1"><div class="flex justify-between items-center font-yoo text-sm"><div class="flex"><a href="/">첫화면 <!></a> <a href="/blog">기록 <!></a></div> <div class="flex items-center space-x-1"><button class="px-1 py-1 text-sm hover:text-blue-600" aria-label="검색" title="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <a href="https://x.com/shouts2713531" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="X로 이동" title="X로 이동" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a> <a href="/rss.xml" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="RSS 피드 구독" title="RSS 피드 구독" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-2.5 w-2.5 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path></svg></a></div></div></nav> <!> <!>',1);function Qa(t,s){ca(s,!0);const[v,j]=xa(),m=()=>ba(wa,"$page",v);let n=G(!1),i=G(""),c=G(Y([])),f=G(!1),O=G(Y([]));Y({}),Y({});let y=[];ya(async()=>{try{console.log("검색 색인 데이터 로드 시도...");const a=await fetch("/search-data/index.json");if(a.ok)h(O,await a.json(),!0),console.log(`검색 색인 로드 완료: ${r(O).length}개 포스트 메타데이터`);else{console.log("색인 파일을 찾을 수 없어 전체 검색 데이터를 로드합니다.");const e=await fetch("/search-data.json");if(e.ok){const d=await e.json();h(O,d.map(L=>{const{content:z,...S}=L;return S}),!0),console.log(`전체 데이터에서 ${r(O).length}개 메타데이터 추출`)}}}catch(a){console.error("검색 데이터 로드 중 오류 발생:",a)}});function k(){const a=r(i).trim().toLowerCase();if(!a){h(c,[],!0);return}h(f,!0);try{!y||y.length===0?fetch("/search-data.json").then(e=>e.json()).then(e=>{y=e,ce(a)}).catch(e=>{console.error("검색 데이터 로드 실패:",e),h(c,[],!0),h(f,!1)}):ce(a)}catch(e){console.error("검색 중 오류 발생:",e),h(c,[],!0),h(f,!1)}}function ce(a){console.log(`검색어: "${a}"`),h(c,y.filter(e=>{const d=e.title&&e.title.toLowerCase().includes(a),L=e.content&&e.content.toLowerCase().includes(a),z=e.summary&&e.summary.toLowerCase().includes(a),S=e.category&&e.category.toLowerCase().includes(a);return e.content&&e.content.toLowerCase().includes(a)&&console.log(`포스트 '${e.title}'에서 '${a}' 키워드 발견`),d||L||z||S}).map(e=>{let d="";return e.content&&e.content.toLowerCase().includes(a)?(d=ve(e.content,a,60),console.log(`컨텍스트 추출: "${d}"`)):e.summary&&e.summary.toLowerCase().includes(a)&&(d=ve(e.summary,a,60)),{slug:e.slug,title:e.title,date:e.date,category:e.category||"미분류",summary:e.summary||"",matchContext:d}}).sort((e,d)=>new Date(d.date)-new Date(e.date)),!0),console.log(`검색 결과: ${r(c).length}개 포스트 찾음`),h(f,!1)}function ve(a,e,d=40){if(!a||!e||typeof a!="string")return"";const L=a.toLowerCase(),z=e.toLowerCase(),S=L.indexOf(z);if(S===-1)return"";const A=Math.max(0,S-d),$=Math.min(a.length,S+e.length+d);let I=a.substring(A,$);return A>0&&(I="..."+I),$<a.length&&(I=I+"..."),I}function H(){h(n,!r(n)),r(n)||(h(i,""),h(c,[],!0))}function Le(){r(i).trim()||h(c,[],!0)}function Se(a){a.key==="Enter"&&k()}function $e(a){const e=document.getElementById("search-modal");e&&!e.contains(a.target)&&r(n)&&H()}var de=Ka();M("click",da,$e);var q=Z(de),fe=l(q),ee=l(fe),N=l(ee),Re=_(l(N));{var ze=a=>{var e=La();u(a,e)};w(Re,a=>{m().url.pathname==="/"&&a(ze)})}o(N);var ae=_(N,2),Ie=_(l(ae));{var De=a=>{var e=Sa();u(a,e)};w(Ie,a=>{m().url.pathname.startsWith("/blog")&&a(De)})}o(ae),o(ee);var ue=_(ee,2),Ee=l(ue);fa(4),o(ue),o(fe),o(q);var he=_(q,2);{var Be=a=>{var e=Ha(),d=l(e),L=l(d),z=l(L),S=_(l(z),2);o(z);var A=_(z,2),$=l(A);ma($),ha($);var I=_($,2);o(A),o(L);var me=_(L,2),He=l(me);{var Ke=C=>{var te=$a();u(C,te)},Pe=(C,te)=>{{var Te=K=>{var Q=Ea(),V=Z(Q);ga(V,21,()=>r(c),_a,(R,p)=>{var E=Ia(),P=l(E),W=l(P),se=l(W),Ve=l(se,!0);o(se);var ge=_(se,2);{var We=g=>{var x=Ra(),X=l(x,!0);o(x),B(()=>J(X,r(p).category)),u(g,x)};w(ge,g=>{r(p).category&&g(We)})}var _e=_(ge,2),Xe=l(_e);{var Fe=g=>{var x=xe(),X=Z(x);Me(X,()=>r(p).title.replace(new RegExp(r(i),"gi"),oe=>`<mark class="bg-yellow-200 px-0.5 rounded">${oe}</mark>`)),u(g,x)},Ge=g=>{var x=be();B(()=>J(x,r(p).title)),u(g,x)};w(Xe,g=>{r(i)&&r(i).trim()?g(Fe):g(Ge,!1)})}o(_e),o(W);var Je=_(W,2);{var Ne=g=>{var x=za(),X=l(x);{var oe=T=>{var F=xe(),Ue=Z(F);Me(Ue,()=>r(p).matchContext.replace(new RegExp(r(i),"gi"),Ye=>`<mark class="bg-yellow-200 px-0.5 rounded">${Ye}</mark>`)),u(T,F)},Qe=T=>{var F=be();B(()=>J(F,r(p).matchContext)),u(T,F)};w(X,T=>{r(i)&&r(i).trim()?T(oe):T(Qe,!1)})}o(x),u(g,x)};w(Je,g=>{r(p).matchContext&&g(Ne)})}o(P),o(E),B(()=>{Ce(P,"href",`/blog/${r(p).slug??""}`),J(Ve,r(p).date)}),M("click",P,H),u(R,E)}),o(V);var re=_(V,2);{var D=R=>{var p=Da(),E=l(p),P=l(E);o(E),o(p),B(W=>{Ce(E,"href",`/search?q=${W??""}`),J(P,`모든 결과 보기 (${r(c).length??""}건)`)},[()=>encodeURIComponent(r(i))]),M("click",E,H),u(R,p)};w(re,R=>{r(c).length>15&&R(D)})}u(K,Q)},Ae=(K,Q)=>{{var V=D=>{var R=Ba();u(D,R)},re=D=>{var R=Oa();u(D,R)};w(K,D=>{r(i)?D(V):D(re,!1)},Q)}};w(C,K=>{r(c).length>0?K(Te):K(Ae,!1)},te)}};w(He,C=>{r(f)?C(Ke):C(Pe,!1)})}o(me),o(d),o(e),B(()=>I.disabled=r(f)),M("click",S,H),ka($,()=>r(i),C=>h(i,C)),M("keypress",$,Se),M("input",$,Le),M("click",I,k),M("click",d,je(function(C){Ma.call(this,s,C)})),M("click",e,Ca(H)),u(a,e)};w(he,a=>{r(n)&&a(Be)})}var Oe=_(he,2);pa(Oe,()=>s.children),B(a=>{ke(N,1,`md px-2 py-1 text-sm hover:text-red-800 relative ${m().url.pathname==="/"?"active":""}`,"svelte-smrll"),ke(ae,1,a,"svelte-smrll")},[()=>`md px-2 py-1 text-sm hover:text-red-800 relative ${m().url.pathname.startsWith("/blog")?"active":""}`]),M("click",Ee,je(H)),u(t,de),va(),j()}export{Qa as component,Na as universal};
