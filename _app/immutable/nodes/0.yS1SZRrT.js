import{b as pe,e as Qe,t as y,a as d,c as _e,d as ge}from"../chunks/Bf8EIeX-.js";import{t as D,h as le,i as xe,aa as Ue,aJ as Ye,g as ye,as as Ze,aD as ea,aC as aa,m as ta,a5 as N,aK as ra,y as sa,aG as oa,am as la,p as na,ab as W,K as be,D as Q,a as ia,M as b,aL as va,c as l,s as p,r as o,n as ca,A as r}from"../chunks/C3k3xJba.js";import{l as da,e as C,b as ua,s as X}from"../chunks/DY9SC2Sg.js";import{i as w}from"../chunks/eFEshVwY.js";import{s as we,r as fa,e as ma,a as ke,i as ha}from"../chunks/DvhvKenV.js";import{s as pa}from"../chunks/CKCmK1Zd.js";import{s as _a,a as ga}from"../chunks/CFXVYhEx.js";import{p as xa}from"../chunks/BJ1y4nNP.js";import{o as ya}from"../chunks/CwPrTOBV.js";function Ce(e,s,c=!1,M=!1,u=!1){var n=e,i="";D(()=>{var v=Ue;if(i===(i=s()??"")){le&&xe();return}if(v.nodes_start!==null&&(Ye(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),i!==""){if(le){ye.data;for(var f=xe(),P=f;f!==null&&(f.nodeType!==8||f.data!=="");)P=f,f=Ze(f);if(f===null)throw ea(),aa;pe(ye,P),n=ta(f);return}var x=i+"";c?x=`<svg>${x}</svg>`:M&&(x=`<math>${x}</math>`);var S=Qe(x);if((c||M)&&(S=N(S)),pe(N(S),S.lastChild),c||M)for(;N(S);)n.before(N(S));else n.before(S)}})}function ba(e,s,c=s){var M=ra();da(e,"input",u=>{var n=u?e.defaultValue:e.value;if(n=se(e)?oe(n):n,c(n),M&&n!==(n=s())){var i=e.selectionStart,v=e.selectionEnd;e.value=n??"",v!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(v,e.value.length))}}),(le&&e.defaultValue!==e.value||sa(s)==null&&e.value)&&c(se(e)?oe(e.value):e.value),oa(()=>{var u=s();se(e)&&u===oe(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function se(e){var s=e.type;return s==="number"||s==="range"}function oe(e){return e===""?null:+e}function wa(e){return function(...s){var c=s[0];c.target===this&&(e==null||e.apply(this,s))}}function Me(e){return function(...s){var c=s[0];return c.stopPropagation(),e==null?void 0:e.apply(this,s)}}function ka(e,s){var n;var c=(n=e.$$events)==null?void 0:n[s.type],M=la(c)?c.slice():c==null?[]:[c];for(var u of M)u.call(this,s)}const Ca=!0,Xa=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ca},Symbol.toStringTag,{value:"Module"}));var Ma=y('<span class="absolute left-2 bottom-0 h-[2px] w-8 translate-x-[-1px] bg-blue-400"></span>'),Sa=y('<span class="absolute left-0.5 bottom-0 h-[2px] w-8 translate-x-[-2px] bg-blue-400"></span>'),La=y('<div class="flex justify-center items-center py-4"><div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div></div>'),ja=y('<span class="px-1 py-0.5 rounded-full bg-gray-100 text-gray-700 shrink-0 text-xs"> </span>'),Ra=y('<p class="mt-0.5 text-xs text-gray-600 bg-yellow-50 p-1 rounded leading-snug"><!></p>'),za=y('<li><a class="block py-1.5 px-2 hover:bg-gray-50 transition-colors"><div class="flex items-center text-xs gap-1"><span class="text-gray-400 shrink-0 tabular-nums"> </span> <!> <h4 class="font-medium text-gray-800 truncate"><!></h4></div> <!></a></li>'),Ba=y('<div class="p-1 text-center border-t border-gray-100"><a class="text-xs text-blue-600 hover:underline"> </a></div>'),Ia=y('<ul class="divide-y divide-gray-100"></ul> <!>',1),Ea=y('<div class="py-4 text-center"><p class="text-gray-500 text-sm">검색 결과가 없습니다.</p> <p class="text-xs text-gray-400 mt-1">다른 검색어로 시도해보세요.</p></div>'),Da=y('<div class="py-4 text-center text-gray-400 text-sm"><p>검색어를 입력하세요</p></div>'),Oa=y('<div class="fixed inset-0 bg-black bg-opacity-30 z-40 flex items-start justify-center pt-14"><div id="search-modal" class="bg-white rounded-md shadow-lg w-[80%] max-w-sm max-h-[75vh] overflow-hidden flex flex-col font-yoo animate-fadeIn svelte-smrll"><div class="p-2 border-b border-gray-100"><div class="flex justify-between items-center mb-1.5"><h3 class="text-sm font-medium text-gray-800">검색</h3> <button class="text-gray-400 hover:text-gray-600" aria-label="닫기"><svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="relative"><input type="text" placeholder="검색어를 입력하세요" class="w-full text-xs py-1 px-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"> <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" aria-label="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <div class="overflow-y-auto flex-1"><!></div></div></div>'),Ha=y('<nav class="w-full md:w-96 px-2 pt-1"><div class="flex justify-between items-center font-yoo text-sm"><div class="flex"><a href="/">첫화면 <!></a> <a href="/blog">기록 <!></a></div> <div class="flex items-center space-x-1"><button class="px-1 py-1 text-sm hover:text-blue-600" aria-label="검색" title="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <a href="https://x.com/shouts2713531" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="X로 이동" title="X로 이동" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a> <a href="/rss.xml" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="RSS 피드 구독" title="RSS 피드 구독" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-2.5 w-2.5 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path></svg></a></div></div></nav> <!> <!>',1);function Ga(e,s){na(s,!0);const[c,M]=_a(),u=()=>ga(xa,"$page",c);let n=W(!1),i=W(""),v=W(be([])),f=W(!1),P=W(be([]));ya(async()=>{try{const a=await fetch("/search-data.json");a.ok&&b(P,await a.json(),!0)}catch(a){console.error("Failed to load search data:",a)}});function x(){b(n,!r(n)),r(n)||(b(i,""),b(v,[],!0))}function S(){r(i).trim()||b(v,[],!0)}function ne(a,t,m=40){if(!a||!t||typeof a!="string")return"";const L=a.toLowerCase(),z=t.toLowerCase(),$=L.indexOf(z);if($===-1)return"";const T=Math.max(0,$-m),j=Math.min(a.length,$+t.length+m);let B=a.substring(T,j);return T>0&&(B="..."+B),j<a.length&&(B=B+"..."),B}function ie(){const a=r(i).trim().toLowerCase();if(!a){b(v,[],!0);return}b(f,!0);try{b(v,r(P).filter(t=>{const m=t.title.toLowerCase().includes(a),L=t.content.toLowerCase().includes(a),z=t.summary&&t.summary.toLowerCase().includes(a);return m||L||z}).map(t=>{let m="";return t.content.toLowerCase().includes(a)?m=ne(t.content,a,60):t.summary&&t.summary.toLowerCase().includes(a)&&(m=ne(t.summary,a,60)),{...t,matchContext:m}}).sort((t,m)=>{const L=new Date(t.date);return new Date(m.date)-L}),!0)}catch(t){console.error("Search error:",t),b(v,[],!0)}finally{b(f,!1)}}function Se(a){a.key==="Enter"&&ie()}function Le(a){const t=document.getElementById("search-modal");t&&!t.contains(a.target)&&r(n)&&x()}var ve=Ha();C("click",va,Le);var U=Q(ve),ce=l(U),Y=l(ce),G=l(Y),je=p(l(G));{var Re=a=>{var t=Ma();d(a,t)};w(je,a=>{u().url.pathname==="/"&&a(Re)})}o(G);var Z=p(G,2),ze=p(l(Z));{var Be=a=>{var t=Sa();d(a,t)};w(ze,a=>{u().url.pathname.startsWith("/blog")&&a(Be)})}o(Z),o(Y);var de=p(Y,2),Ie=l(de);ca(4),o(de),o(ce),o(U);var ue=p(U,2);{var Ee=a=>{var t=Oa(),m=l(t),L=l(m),z=l(L),$=p(l(z),2);o(z);var T=p(z,2),j=l(T);fa(j),ua(j);var B=p(j,2);o(T),o(L);var fe=p(L,2),Oe=l(fe);{var He=k=>{var ee=La();d(k,ee)},Ke=(k,ee)=>{{var Pe=O=>{var J=Ia(),A=Q(J);ma(A,21,()=>r(v),ha,(R,_)=>{var E=za(),H=l(E),q=l(H),te=l(q),Te=l(te,!0);o(te);var me=p(te,2);{var Ae=h=>{var g=ja(),F=l(g,!0);o(g),D(()=>X(F,r(_).category)),d(h,g)};w(me,h=>{r(_).category&&h(Ae)})}var he=p(me,2),qe=l(he);{var Fe=h=>{var g=_e(),F=Q(g);Ce(F,()=>r(_).title.replace(new RegExp(r(i),"gi"),re=>`<mark class="bg-yellow-200 px-0.5 rounded">${re}</mark>`)),d(h,g)},Ve=h=>{var g=ge();D(()=>X(g,r(_).title)),d(h,g)};w(qe,h=>{r(i)&&r(i).trim()?h(Fe):h(Ve,!1)})}o(he),o(q);var We=p(q,2);{var Xe=h=>{var g=Ra(),F=l(g);{var re=K=>{var V=_e(),Je=Q(V);Ce(Je,()=>r(_).matchContext.replace(new RegExp(r(i),"gi"),Ne=>`<mark class="bg-yellow-200 px-0.5 rounded">${Ne}</mark>`)),d(K,V)},Ge=K=>{var V=ge();D(()=>X(V,r(_).matchContext)),d(K,V)};w(F,K=>{r(i)&&r(i).trim()?K(re):K(Ge,!1)})}o(g),d(h,g)};w(We,h=>{r(_).matchContext&&h(Xe)})}o(H),o(E),D(()=>{ke(H,"href",`/blog/${r(_).slug??""}`),X(Te,r(_).date)}),C("click",H,x),d(R,E)}),o(A);var ae=p(A,2);{var I=R=>{var _=Ba(),E=l(_),H=l(E);o(E),o(_),D(q=>{ke(E,"href",`/search?q=${q??""}`),X(H,`모든 결과 보기 (${r(v).length??""}건)`)},[()=>encodeURIComponent(r(i))]),C("click",E,x),d(R,_)};w(ae,R=>{r(v).length>15&&R(I)})}d(O,J)},$e=(O,J)=>{{var A=I=>{var R=Ea();d(I,R)},ae=I=>{var R=Da();d(I,R)};w(O,I=>{r(i)?I(A):I(ae,!1)},J)}};w(k,O=>{r(v).length>0?O(Pe):O($e,!1)},ee)}};w(Oe,k=>{r(f)?k(He):k(Ke,!1)})}o(fe),o(m),o(t),D(()=>B.disabled=r(f)),C("click",$,x),ba(j,()=>r(i),k=>b(i,k)),C("keypress",j,Se),C("input",j,S),C("click",B,ie),C("click",m,Me(function(k){ka.call(this,s,k)})),C("click",t,wa(x)),d(a,t)};w(ue,a=>{r(n)&&a(Ee)})}var De=p(ue,2);pa(De,()=>s.children),D(a=>{we(G,1,`md px-2 py-1 text-sm hover:text-red-800 relative ${u().url.pathname==="/"?"active":""}`,"svelte-smrll"),we(Z,1,a,"svelte-smrll")},[()=>`md px-2 py-1 text-sm hover:text-red-800 relative ${u().url.pathname.startsWith("/blog")?"active":""}`]),C("click",Ie,Me(x)),d(e,ve),ia(),M()}export{Ga as component,Xa as universal};
