import{d as he,e as Ue,t as p,a as f,c as ge,b as xe}from"../chunks/B4-_d8St.js";import{t as E,h as ne,F as pe,a8 as Ge,ag as Ze,g as we,ah as qe,ai as ea,aj as aa,J as ta,a3 as U,ak as ra,v as sa,a9 as oa,p as la,ad as A,q as ye,Y as G,c as o,a as na,u as g,m as r,al as ia,s as h,r as s,n as ca}from"../chunks/MwnS0lFL.js";import{l as va,d as da,e as be,s as fa,b as ua,a as J}from"../chunks/CjAMaYxn.js";import{i as y}from"../chunks/DWCJLwC0.js";import{s as se,r as ma,e as _a,a as ke,g as ha,i as ga}from"../chunks/Ba-vWabv.js";import{s as xa}from"../chunks/BgSp-R5H.js";import{p as pa}from"../chunks/DAjwLjgO.js";import{o as wa}from"../chunks/CMMRE-rK.js";function Ce(t,i,b=!1,I=!1,x=!1){var c=t,l="";E(()=>{var n=Ge;if(l===(l=i()??"")){ne&&pe();return}if(n.nodes_start!==null&&(Ze(n.nodes_start,n.nodes_end),n.nodes_start=n.nodes_end=null),l!==""){if(ne){we.data;for(var d=pe(),T=d;d!==null&&(d.nodeType!==8||d.data!=="");)T=d,d=qe(d);if(d===null)throw ea(),aa;he(we,T),c=ta(d);return}var w=l+"";b?w=`<svg>${w}</svg>`:I&&(w=`<math>${w}</math>`);var k=Ue(w);if((b||I)&&(k=U(k)),he(U(k),k.lastChild),b||I)for(;U(k);)c.before(U(k));else c.before(k)}})}function ya(t,i,b=i){var I=ra();va(t,"input",x=>{var c=x?t.defaultValue:t.value;if(c=oe(t)?le(c):c,b(c),I&&c!==(c=i())){var l=t.selectionStart,n=t.selectionEnd;t.value=c??"",n!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(n,t.value.length))}}),(ne&&t.defaultValue!==t.value||sa(i)==null&&t.value)&&b(oe(t)?le(t.value):t.value),oa(()=>{var x=i();oe(t)&&x===le(t.value)||t.type==="date"&&!x&&!t.value||x!==t.value&&(t.value=x??"")})}function oe(t){var i=t.type;return i==="number"||i==="range"}function le(t){return t===""?null:+t}const ba=!0,Ja=Object.freeze(Object.defineProperty({__proto__:null,prerender:ba},Symbol.toStringTag,{value:"Module"}));function ka(t,i,b){r(i).trim()||g(b,[],!0)}var Ca=p('<span class="absolute left-2 bottom-0 h-[2px] w-8 translate-x-[-1px] bg-blue-400"></span>'),Ma=p('<span class="absolute left-0.5 bottom-0 h-[2px] w-8 translate-x-[-2px] bg-blue-400"></span>'),La=(t,i)=>t.key==="Escape"&&i(),Sa=t=>t.stopPropagation(),ja=(t,i)=>t.key==="Escape"&&i(),$a=p('<div class="flex justify-center items-center py-4"><div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div></div>'),Ra=p("<span> </span>"),za=p('<p class="mt-0.5 text-xs text-gray-600 bg-yellow-50 p-1 rounded leading-snug"><!></p>'),Ea=p('<li><a class="block py-1.5 px-2 hover:bg-gray-50 transition-colors"><div class="flex items-center text-xs gap-1"><span class="text-gray-400 shrink-0 tabular-nums"> </span> <!> <h4 class="font-medium text-gray-800 truncate"><!></h4></div> <!></a></li>'),Ia=p('<div class="p-1 text-center border-t border-gray-100"><a class="text-xs text-blue-600 hover:underline"> </a></div>'),Ba=p('<ul class="divide-y divide-gray-100"></ul> <!>',1),Oa=p('<div class="py-4 text-center"><p class="text-gray-500 text-sm">검색 결과가 없습니다.</p> <p class="text-xs text-gray-400 mt-1">다른 검색어로 시도해보세요.</p></div>'),Ha=p('<div class="py-4 text-center text-gray-400 text-sm"><p>검색어를 입력하세요</p></div>'),Da=p('<div class="fixed inset-0 bg-black bg-opacity-30 z-40 flex items-start justify-center pt-14" role="button" tabindex="0"><div id="search-modal" class="bg-white rounded-md shadow-lg w-[80%] max-w-sm max-h-[75vh] overflow-hidden flex flex-col font-yoo animate-fadeIn svelte-smrll" role="dialog" aria-modal="true" tabindex="-1"><div class="p-2 border-b border-gray-100"><div class="flex justify-between items-center mb-1.5"><h3 class="text-sm font-medium text-gray-800">검색</h3> <button class="text-gray-400 hover:text-gray-600" aria-label="닫기"><svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="relative"><input type="text" placeholder="검색어를 입력하세요" class="w-full text-xs py-1 px-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"> <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" aria-label="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <div class="overflow-y-auto flex-1"><!></div></div></div>'),Pa=p('<nav class="w-full md:w-96 px-2 pt-1"><div class="flex justify-between items-center font-yoo text-sm"><div class="flex"><a href="/">첫화면 <!></a> <a href="/blog">기록 <!></a></div> <div class="flex items-center space-x-1"><button class="px-1 py-1 text-sm hover:text-blue-600" aria-label="검색" title="검색"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <a href="https://x.com/shouts2713531" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="X로 이동" title="X로 이동" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a> <a href="/rss.xml" class="px-1 py-1 text-sm hover:text-orange-600" aria-label="RSS 피드 구독" title="RSS 피드 구독" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" class="h-2.5 w-2.5 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path></svg></a></div></div></nav> <!> <!>',1);function Na(t,i){la(i,!0);const[b,I]=fa(),x=()=>ua(pa,"$page",b);let c=A(!1),l=A(""),n=A(ye([])),d=A(!1),T=A(ye([])),w=[];wa(async()=>{try{console.log("검색 데이터 로드 시도...");const a=await fetch("/search-data.json");a.ok?(w=await a.json(),g(T,w.map(e=>{const{content:v,...C}=e;return C}),!0),console.log(`검색 데이터 로드 완료: ${r(T).length}개 포스트 메타데이터`)):console.error("검색 데이터를 찾을 수 없습니다.")}catch(a){console.error("검색 데이터 로드 중 오류 발생:",a)}});function k(){const a=r(l).trim().toLowerCase();if(!a){g(n,[],!0);return}g(d,!0);try{if(!w||w.length===0){console.log("검색 데이터가 로드되지 않았습니다."),g(n,[],!0),g(d,!1);return}Me(a)}catch(e){console.error("검색 중 오류 발생:",e),g(n,[],!0),g(d,!1)}}function Me(a){console.log(`검색어: "${a}"`),g(n,w.filter(e=>{const v=e.title&&e.title.toLowerCase().includes(a),C=e.content&&e.content.toLowerCase().includes(a),B=e.summary&&e.summary.toLowerCase().includes(a),O=e.category&&e.category.toLowerCase().includes(a);return e.content&&e.content.toLowerCase().includes(a)&&console.log(`포스트 '${e.title}'에서 '${a}' 키워드 발견`),v||C||B||O}).map(e=>{let v="";return e.content&&e.content.toLowerCase().includes(a)?(v=ie(e.content,a,60),console.log(`컨텍스트 추출: "${v}"`)):e.summary&&e.summary.toLowerCase().includes(a)&&(v=ie(e.summary,a,60)),{slug:e.slug,title:e.title,date:e.date,category:e.category||"미분류",summary:e.summary||"",matchContext:v}}).sort((e,v)=>new Date(v.date)-new Date(e.date)),!0),console.log(`검색 결과: ${r(n).length}개 포스트 찾음`),g(d,!1)}function ie(a,e,v=40){if(!a||!e||typeof a!="string")return"";const C=a.toLowerCase(),B=e.toLowerCase(),O=C.indexOf(B);if(O===-1)return"";const K=Math.max(0,O-v),S=Math.min(a.length,O+e.length+v);let j=a.substring(K,S);return K>0&&(j="..."+j),S<a.length&&(j=j+"..."),j}function L(){g(c,!r(c)),r(c)||(g(l,""),g(n,[],!0))}function Le(a){a.key==="Enter"&&k()}function Se(a){const e=document.getElementById("search-modal");e&&!e.contains(a.target)&&r(c)&&L()}var ce=Pa();be("click",ia,Se);var Z=G(ce),ve=o(Z),q=o(ve),N=o(q),je=h(o(N));{var $e=a=>{var e=Ca();f(a,e)};y(je,a=>{x().url.pathname==="/"&&a($e)})}s(N);var ee=h(N,2),Re=h(o(ee));{var ze=a=>{var e=Ma();f(a,e)};y(Re,a=>{x().url.pathname.startsWith("/blog")&&a(ze)})}s(ee),s(q);var de=h(q,2),Ee=o(de);Ee.__click=L,ca(4),s(de),s(ve),s(Z);var fe=h(Z,2);{var Ie=a=>{var e=Da();e.__click=L,e.__keydown=[La,L];var v=o(e);v.__click=[Sa],v.__keydown=[ja,L];var C=o(v),B=o(C),O=h(o(B),2);O.__click=L,s(B);var K=h(B,2),S=o(K);ma(S),S.__input=[ka,l,n];var j=h(S,2);j.__click=k,s(K),s(C);var ue=h(C,2),Oe=o(ue);{var He=$=>{var ae=$a();f($,ae)},De=($,ae)=>{{var Pe=H=>{var Q=Ba(),F=G(Q);_a(F,21,()=>r(n),ga,(M,u)=>{var z=Ea(),D=o(z);D.__click=L;var V=o(D),re=o(V),Ke=o(re,!0);s(re);var me=h(re,2);{var Fe=m=>{var _=Ra(),W=o(_,!0);s(_),E(X=>{se(_,1,`px-1 py-0 rounded shrink-0 text-xs ${X??""}`,"svelte-smrll"),J(W,r(u).category)},[()=>ha(r(u).category)]),f(m,_)};y(me,m=>{r(u).category&&m(Fe)})}var _e=h(me,2),Ve=o(_e);{var We=m=>{var _=ge(),W=G(_);Ce(W,()=>r(u).title.replace(new RegExp(r(l),"gi"),X=>`<mark class="bg-yellow-200 px-0.5 rounded">${X}</mark>`)),f(m,_)},Xe=m=>{var _=xe();E(()=>J(_,r(u).title)),f(m,_)};y(Ve,m=>{r(l)&&r(l).trim()?m(We):m(Xe,!1)})}s(_e),s(V);var Ye=h(V,2);{var Ae=m=>{var _=za(),W=o(_);{var X=P=>{var Y=ge(),Ne=G(Y);Ce(Ne,()=>r(u).matchContext.replace(new RegExp(r(l),"gi"),Qe=>`<mark class="bg-yellow-200 px-0.5 rounded">${Qe}</mark>`)),f(P,Y)},Je=P=>{var Y=xe();E(()=>J(Y,r(u).matchContext)),f(P,Y)};y(W,P=>{r(l)&&r(l).trim()?P(X):P(Je,!1)})}s(_),f(m,_)};y(Ye,m=>{r(u).matchContext&&m(Ae)})}s(D),s(z),E(()=>{ke(D,"href",`/blog/${r(u).slug??""}`),J(Ke,r(u).date)}),f(M,z)}),s(F);var te=h(F,2);{var R=M=>{var u=Ia(),z=o(u);z.__click=L;var D=o(z);s(z),s(u),E(V=>{ke(z,"href",`/search?q=${V??""}`),J(D,`모든 결과 보기 (${r(n).length??""}건)`)},[()=>encodeURIComponent(r(l))]),f(M,u)};y(te,M=>{r(n).length>15&&M(R)})}f(H,Q)},Te=(H,Q)=>{{var F=R=>{var M=Oa();f(R,M)},te=R=>{var M=Ha();f(R,M)};y(H,R=>{r(l)?R(F):R(te,!1)},Q)}};y($,H=>{r(n).length>0?H(Pe):H(Te,!1)},ae)}};y(Oe,$=>{r(d)?$(He):$(De,!1)})}s(ue),s(v),s(e),E(()=>j.disabled=r(d)),be("keypress",S,Le),ya(S,()=>r(l),$=>g(l,$)),f(a,e)};y(fe,a=>{r(c)&&a(Ie)})}var Be=h(fe,2);xa(Be,()=>i.children),E(a=>{se(N,1,`md px-2 py-1 text-sm hover:text-red-800 relative ${x().url.pathname==="/"?"active":""}`,"svelte-smrll"),se(ee,1,a,"svelte-smrll")},[()=>`md px-2 py-1 text-sm hover:text-red-800 relative ${x().url.pathname.startsWith("/blog")?"active":""}`]),f(t,ce),na(),I()}da(["click","keydown","input"]);export{Na as component,Ja as universal};
